<!DOCTYPE html>
<html><head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Debian11 Install Postgresql13 - CatBSD&#39;s Blog</title><meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="学习一下Postgresql数据库
 安装数据流 # 安装 apt install postgresql postgresql-contrib  # 查看版本 sudo -u postgres psql -c &#34;SELECT version();&#34;    version ---------------------------------------------------------------------------------------------------------------------------  PostgreSQL 13.5 (Debian 13.5-0&#43;deb11u1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit (1 row) 查看已存在数据库 Postgresql安装完成后会自动创建一个postgres用户
su - postgres //切换到postgres用户 psql //进入postgres命令交互 \l //查看所有已存在数据库   postgres=# \l  List of databases  Name | Owner | Encoding | Collate | Ctype | Access privileges -----------&#43;----------&#43;----------&#43;------------&#43;------------&#43;-----------------------  postgres | postgres | UTF8 | en_US." />
	<meta property="og:image" content=""/>
	<meta property="og:title" content="Debian11 Install Postgresql13" />
<meta property="og:description" content="学习一下Postgresql数据库
 安装数据流 # 安装 apt install postgresql postgresql-contrib  # 查看版本 sudo -u postgres psql -c &#34;SELECT version();&#34;    version ---------------------------------------------------------------------------------------------------------------------------  PostgreSQL 13.5 (Debian 13.5-0&#43;deb11u1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit (1 row) 查看已存在数据库 Postgresql安装完成后会自动创建一个postgres用户
su - postgres //切换到postgres用户 psql //进入postgres命令交互 \l //查看所有已存在数据库   postgres=# \l  List of databases  Name | Owner | Encoding | Collate | Ctype | Access privileges -----------&#43;----------&#43;----------&#43;------------&#43;------------&#43;-----------------------  postgres | postgres | UTF8 | en_US." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://dogbsd.github.io/posts/debian11-install-postgresql13/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-04-11T18:07:00+08:00" />
<meta property="article:modified_time" content="2022-04-11T18:07:00+08:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Debian11 Install Postgresql13"/>
<meta name="twitter:description" content="学习一下Postgresql数据库
 安装数据流 # 安装 apt install postgresql postgresql-contrib  # 查看版本 sudo -u postgres psql -c &#34;SELECT version();&#34;    version ---------------------------------------------------------------------------------------------------------------------------  PostgreSQL 13.5 (Debian 13.5-0&#43;deb11u1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit (1 row) 查看已存在数据库 Postgresql安装完成后会自动创建一个postgres用户
su - postgres //切换到postgres用户 psql //进入postgres命令交互 \l //查看所有已存在数据库   postgres=# \l  List of databases  Name | Owner | Encoding | Collate | Ctype | Access privileges -----------&#43;----------&#43;----------&#43;------------&#43;------------&#43;-----------------------  postgres | postgres | UTF8 | en_US."/>
<script src="https://dogbsd.github.io/js/feather.min.js"></script>
	
	
        <link href="https://dogbsd.github.io/css/fonts.b685ac6f654695232de7b82a9143a46f9e049c8e3af3a21d9737b01f4be211d1.css" rel="stylesheet">
	

	
	<link rel="stylesheet" type="text/css" media="screen" href="https://dogbsd.github.io/css/main.2f9b5946627215dc1ae7fa5f82bfc9cfcab000329136befeea5733f21e77d68f.css" />
		<link id="darkModeStyle" rel="stylesheet" type="text/css" href="https://dogbsd.github.io/css/dark.726cd11ca6eb7c4f7d48eb420354f814e5c1b94281aaf8fd0511c1319f7f78a4.css" media="(prefers-color-scheme: dark)"  />
	
	
	
</head>
<body>
        <div class="content"><header>
	<div class="main">
		<a href="https://dogbsd.github.io/">CatBSD&#39;s Blog</a>
	</div>
	<nav>
		
		<a href="/">Home</a>
		
		<a href="/posts">All posts</a>
		
		<a href="/about">About</a>
		
		<a href="/tags">Tags</a>
		
		
	</nav>
</header>

<main>
	<article>
		<div class="title">
			<h1 class="title">Debian11 Install Postgresql13</h1>
			<div class="meta">Posted on Apr 11, 2022</div>
		</div>
		
		<div class="tldr">
			<strong>tl;dr:</strong>
			Debian11 Install Postgresql13
		</div>

		<section class="body">
			<blockquote>
<p>学习一下Postgresql数据库</p>
</blockquote>
<h2 id="安装数据流">安装数据流</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span># 安装
</span></span><span style="display:flex;"><span>apt install postgresql postgresql-contrib
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span># 查看版本
</span></span><span style="display:flex;"><span>sudo -u postgres psql -c &#34;SELECT version();&#34;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                                                          version                                                          
</span></span><span style="display:flex;"><span>---------------------------------------------------------------------------------------------------------------------------
</span></span><span style="display:flex;"><span> PostgreSQL 13.5 (Debian 13.5-0+deb11u1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit
</span></span><span style="display:flex;"><span>(1 row)
</span></span></code></pre></div><h2 id="查看已存在数据库">查看已存在数据库</h2>
<p>Postgresql安装完成后会自动创建一个postgres用户</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>su - postgres //切换到postgres用户
</span></span><span style="display:flex;"><span>psql //进入postgres命令交互
</span></span><span style="display:flex;"><span>\l  //查看所有已存在数据库
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>postgres=# \l
</span></span><span style="display:flex;"><span>                                 List of databases
</span></span><span style="display:flex;"><span>   Name    |  Owner   | Encoding |  Collate   |   Ctype    |   Access privileges   
</span></span><span style="display:flex;"><span>-----------+----------+----------+------------+------------+-----------------------
</span></span><span style="display:flex;"><span> postgres  | postgres | UTF8     | en_US.utf8 | en_US.utf8 | 
</span></span><span style="display:flex;"><span> template0 | postgres | UTF8     | en_US.utf8 | en_US.utf8 | =c/postgres          +
</span></span><span style="display:flex;"><span>           |          |          |            |            | postgres=CTc/postgres
</span></span><span style="display:flex;"><span> template1 | postgres | UTF8     | en_US.utf8 | en_US.utf8 | =c/postgres          +
</span></span><span style="display:flex;"><span>           |          |          |            |            | postgres=CTc/postgres
</span></span><span style="display:flex;"><span>(3 rows)
</span></span></code></pre></div><h2 id="设置默认用户postgres密码">设置默认用户postgres密码</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>\password postgres
</span></span></code></pre></div><h2 id="创建新数据库-dbname">创建新数据库 dbname</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>// 新建数据库
</span></span><span style="display:flex;"><span>CREATE DATABASE dbname;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>postgres=# CREATE DATABASE dbname;
</span></span><span style="display:flex;"><span>CREATE DATABASE
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span># 或者使用createdb创建，后续可以学习一下
</span></span></code></pre></div><h2 id="进入创建数据库">进入创建数据库</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>// 查看已存在数据库
</span></span><span style="display:flex;"><span>\l 
</span></span><span style="display:flex;"><span>// 进入新数据库
</span></span><span style="display:flex;"><span>\c dbname
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>You are now connected to database &#34;dbname&#34; as user &#34;postgres&#34;.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>// 或者使用 命令行执行
</span></span><span style="display:flex;"><span>psql -h localhost -p 5432 -U postgres dbname
</span></span></code></pre></div><h2 id="删除数据库">删除数据库</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>DROP DATABASE 会删除数据库的系统目录项并且删除包含数据的文件目录。
</span></span><span style="display:flex;"><span>DROP DATABASE 只能由超级管理员或数据库拥有者执行。
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>DROP DATABASE dbname;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>或者 命令行执行
</span></span><span style="display:flex;"><span>dropdb -h localhost -p 5432 -U postgres dbname
</span></span></code></pre></div><h2 id="开启远程访问">开启远程访问</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>// 修改配置
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>nano /etc/postgresql/13/main/postgresql.conf
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>// 修改
</span></span><span style="display:flex;"><span>listen_addresses = &#39;*&#39;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>// 修改配置
</span></span><span style="display:flex;"><span>nano /etc/postgresql/13/main/pg_hba.conf
</span></span><span style="display:flex;"><span>// 添加下面一行到最后
</span></span><span style="display:flex;"><span>host	all	all	0.0.0.0/0	md5
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>// 重启sql服务
</span></span><span style="display:flex;"><span>service postgresql restart
</span></span><span style="display:flex;"><span>service postgresql@13-main restart
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>// 查看5432端口是否被监听
</span></span><span style="display:flex;"><span>ss -nlt | grep 5432
</span></span><span style="display:flex;"><span>LISTEN 0      244          0.0.0.0:5432       0.0.0.0:*          
</span></span><span style="display:flex;"><span>LISTEN 0      244             [::]:5432          [::]:*
</span></span></code></pre></div><h2 id="卸载postgresql">卸载Postgresql</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>sudo apt-get --purge remove postgresql
</span></span><span style="display:flex;"><span>sudo apt-get purge postgresql*
</span></span><span style="display:flex;"><span>sudo apt-get --purge remove postgresql postgresql-doc postgresql-common
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>dpkg -l | grep postgres
</span></span><span style="display:flex;"><span>sudo apt-get --purge remove {POSTGRESS-PACKAGE NAME}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>sudo rm -rf /var/lib/postgresql/
</span></span><span style="display:flex;"><span>sudo rm -rf /var/log/postgresql/
</span></span><span style="display:flex;"><span>sudo rm -rf /etc/postgresql/
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>参考：https://kb.objectrocket.com/postgresql/how-to-completely-uninstall-postgresql-757
</span></span></code></pre></div>
		</section>

		<div class="post-tags">
			
			
			<nav class="nav tags">
				<ul class="tags">
					
					<li><a href="/tags/linux">linux</a></li>
					
					<li><a href="/tags/sql">sql</a></li>
					
				</ul>
			</nav>
			
			
		</div>
	</article>
</main>
<footer>
<hr><a class="soc" href="https://github.com/dogbsd" title="GitHub"><i data-feather="github"></i></a>|⚡️
	2022  © CatBSD |  <a href="https://github.com/athul/archie">Archie Theme</a> | Built with <a href="https://gohugo.io">Hugo</a>
</footer>


<script>
      feather.replace()
</script></div>
    </body>
</html>
